@startuml
TaxiDriverApp -> comm: endRide(taxiDriverId, GPS)
comm -> taxiMan:

taxiMan -> taxiMan: checkEndRideFunctionalityIsAllowed(taxiDriverId)

alt  very wrong


else ok



taxiMan -> LocationManager: TaxiDriverIsInsideCity(GPS)


alt taxi driver inside city
	taxiMan <-- LocationManager: true
	taxiMan -> taxiMan: setAvailable(taxiDriverId)
	taxiMan -> LocationManager: getCurrentZone(GPS);
	taxiMan <-- LocationManager: zone
	taxiMan -> taxiMan: push(zone, taxiDriverId) //??
else
	taxiMan <-- LocationManager: false
	taxiMan -> taxiMan: setOutOfCity(taxiDriverId) //??
end
taxiMan -> DBMS: write
taxiMan ->> comm: confirm()
comm ->> TaxiDriverApp: confirm()
end
@enduml